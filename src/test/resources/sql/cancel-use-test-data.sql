-- 사용취소 테스트용 데이터 (UUID 기반)
-- member_id: 4001 ~ 4010
-- ledger_id: 4001 ~ 4020
-- transaction_id: 4001 ~ 4030

-- CU-T01: 전액 사용취소
INSERT INTO member_point (member_id, total_balance, created_at, updated_at)
VALUES (X'00000000000000000000000000004001', 0, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_ledger (id, member_id, earned_amount, available_amount, used_amount, earn_type, expired_at, is_canceled, created_at, updated_at)
VALUES (X'00000000000000000000000000004001', X'00000000000000000000000000004001', 1000, 0, 1000, 'SYSTEM', DATEADD('DAY', 365, CURRENT_TIMESTAMP), false, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, ledger_id, created_at)
VALUES (X'00000000000000000000000000004001', X'00000000000000000000000000004001', 'EARN', 1000, X'00000000000000000000000000004001', CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, order_id, created_at)
VALUES (X'00000000000000000000000000004002', X'00000000000000000000000000004001', 'USE', 1000, 'ORDER-CU-T01', CURRENT_TIMESTAMP);

INSERT INTO point_usage_detail (id, transaction_id, ledger_id, used_amount, canceled_amount, created_at, updated_at)
VALUES (X'00000000000000000000000000004001', X'00000000000000000000000000004002', X'00000000000000000000000000004001', 1000, 0, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

-- CU-T02: 부분 사용취소
INSERT INTO member_point (member_id, total_balance, created_at, updated_at)
VALUES (X'00000000000000000000000000004002', 0, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_ledger (id, member_id, earned_amount, available_amount, used_amount, earn_type, expired_at, is_canceled, created_at, updated_at)
VALUES (X'00000000000000000000000000004002', X'00000000000000000000000000004002', 1000, 0, 1000, 'SYSTEM', DATEADD('DAY', 365, CURRENT_TIMESTAMP), false, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, ledger_id, created_at)
VALUES (X'00000000000000000000000000004003', X'00000000000000000000000000004002', 'EARN', 1000, X'00000000000000000000000000004002', CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, order_id, created_at)
VALUES (X'00000000000000000000000000004004', X'00000000000000000000000000004002', 'USE', 1000, 'ORDER-CU-T02', CURRENT_TIMESTAMP);

INSERT INTO point_usage_detail (id, transaction_id, ledger_id, used_amount, canceled_amount, created_at, updated_at)
VALUES (X'00000000000000000000000000004002', X'00000000000000000000000000004004', X'00000000000000000000000000004002', 1000, 0, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

-- CU-T03: 여러 적립건 부분 취소 (A 500 + B 300 사용, 600 취소)
INSERT INTO member_point (member_id, total_balance, created_at, updated_at)
VALUES (X'00000000000000000000000000004003', 200, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_ledger (id, member_id, earned_amount, available_amount, used_amount, earn_type, expired_at, is_canceled, created_at, updated_at)
VALUES (X'00000000000000000000000000004003', X'00000000000000000000000000004003', 500, 0, 500, 'SYSTEM', DATEADD('DAY', 365, CURRENT_TIMESTAMP), false, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_ledger (id, member_id, earned_amount, available_amount, used_amount, earn_type, expired_at, is_canceled, created_at, updated_at)
VALUES (X'00000000000000000000000000004004', X'00000000000000000000000000004003', 500, 200, 300, 'SYSTEM', DATEADD('DAY', 365, CURRENT_TIMESTAMP), false, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, ledger_id, created_at)
VALUES (X'00000000000000000000000000004005', X'00000000000000000000000000004003', 'EARN', 500, X'00000000000000000000000000004003', CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, ledger_id, created_at)
VALUES (X'00000000000000000000000000004006', X'00000000000000000000000000004003', 'EARN', 500, X'00000000000000000000000000004004', CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, order_id, created_at)
VALUES (X'00000000000000000000000000004007', X'00000000000000000000000000004003', 'USE', 800, 'ORDER-CU-T03', CURRENT_TIMESTAMP);

INSERT INTO point_usage_detail (id, transaction_id, ledger_id, used_amount, canceled_amount, created_at, updated_at)
VALUES (X'00000000000000000000000000004003', X'00000000000000000000000000004007', X'00000000000000000000000000004003', 500, 0, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_usage_detail (id, transaction_id, ledger_id, used_amount, canceled_amount, created_at, updated_at)
VALUES (X'00000000000000000000000000004004', X'00000000000000000000000000004007', X'00000000000000000000000000004004', 300, 0, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

-- CU-T04: 만료 안된 적립건 복구
INSERT INTO member_point (member_id, total_balance, created_at, updated_at)
VALUES (X'00000000000000000000000000004004', 0, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_ledger (id, member_id, earned_amount, available_amount, used_amount, earn_type, expired_at, is_canceled, created_at, updated_at)
VALUES (X'00000000000000000000000000004005', X'00000000000000000000000000004004', 500, 0, 500, 'SYSTEM', DATEADD('DAY', 365, CURRENT_TIMESTAMP), false, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, ledger_id, created_at)
VALUES (X'00000000000000000000000000004008', X'00000000000000000000000000004004', 'EARN', 500, X'00000000000000000000000000004005', CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, order_id, created_at)
VALUES (X'00000000000000000000000000004009', X'00000000000000000000000000004004', 'USE', 500, 'ORDER-CU-T04', CURRENT_TIMESTAMP);

INSERT INTO point_usage_detail (id, transaction_id, ledger_id, used_amount, canceled_amount, created_at, updated_at)
VALUES (X'00000000000000000000000000004005', X'00000000000000000000000000004009', X'00000000000000000000000000004005', 500, 0, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

-- CU-T05: 만료된 적립건 복구 (신규 적립)
INSERT INTO member_point (member_id, total_balance, created_at, updated_at)
VALUES (X'00000000000000000000000000004005', 0, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_ledger (id, member_id, earned_amount, available_amount, used_amount, earn_type, expired_at, is_canceled, created_at, updated_at)
VALUES (X'00000000000000000000000000004006', X'00000000000000000000000000004005', 500, 0, 500, 'SYSTEM', DATEADD('DAY', -1, CURRENT_TIMESTAMP), false, DATEADD('DAY', -366, CURRENT_TIMESTAMP), CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, ledger_id, created_at)
VALUES (X'00000000000000000000000000004010', X'00000000000000000000000000004005', 'EARN', 500, X'00000000000000000000000000004006', DATEADD('DAY', -366, CURRENT_TIMESTAMP));

INSERT INTO point_transaction (id, member_id, type, amount, order_id, created_at)
VALUES (X'00000000000000000000000000004011', X'00000000000000000000000000004005', 'USE', 500, 'ORDER-CU-T05', DATEADD('DAY', -2, CURRENT_TIMESTAMP));

INSERT INTO point_usage_detail (id, transaction_id, ledger_id, used_amount, canceled_amount, created_at, updated_at)
VALUES (X'00000000000000000000000000004006', X'00000000000000000000000000004011', X'00000000000000000000000000004006', 500, 0, DATEADD('DAY', -2, CURRENT_TIMESTAMP), CURRENT_TIMESTAMP);

-- CU-T06: 혼합 (만료+미만료) (A 만료 500, B 미만료 500, 800 사용)
INSERT INTO member_point (member_id, total_balance, created_at, updated_at)
VALUES (X'00000000000000000000000000004006', 0, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_ledger (id, member_id, earned_amount, available_amount, used_amount, earn_type, expired_at, is_canceled, created_at, updated_at)
VALUES (X'00000000000000000000000000004007', X'00000000000000000000000000004006', 500, 0, 500, 'SYSTEM', DATEADD('DAY', -1, CURRENT_TIMESTAMP), false, DATEADD('DAY', -366, CURRENT_TIMESTAMP), CURRENT_TIMESTAMP);

INSERT INTO point_ledger (id, member_id, earned_amount, available_amount, used_amount, earn_type, expired_at, is_canceled, created_at, updated_at)
VALUES (X'00000000000000000000000000004008', X'00000000000000000000000000004006', 500, 200, 300, 'SYSTEM', DATEADD('DAY', 365, CURRENT_TIMESTAMP), false, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, ledger_id, created_at)
VALUES (X'00000000000000000000000000004012', X'00000000000000000000000000004006', 'EARN', 500, X'00000000000000000000000000004007', DATEADD('DAY', -366, CURRENT_TIMESTAMP));

INSERT INTO point_transaction (id, member_id, type, amount, ledger_id, created_at)
VALUES (X'00000000000000000000000000004013', X'00000000000000000000000000004006', 'EARN', 500, X'00000000000000000000000000004008', CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, order_id, created_at)
VALUES (X'00000000000000000000000000004014', X'00000000000000000000000000004006', 'USE', 800, 'ORDER-CU-T06', CURRENT_TIMESTAMP);

INSERT INTO point_usage_detail (id, transaction_id, ledger_id, used_amount, canceled_amount, created_at, updated_at)
VALUES (X'00000000000000000000000000004007', X'00000000000000000000000000004014', X'00000000000000000000000000004007', 500, 0, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_usage_detail (id, transaction_id, ledger_id, used_amount, canceled_amount, created_at, updated_at)
VALUES (X'00000000000000000000000000004008', X'00000000000000000000000000004014', X'00000000000000000000000000004008', 300, 0, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

-- CU-T07: 취소 가능 금액 초과 (사용 1000, 1500 취소 시도)
INSERT INTO member_point (member_id, total_balance, created_at, updated_at)
VALUES (X'00000000000000000000000000004007', 0, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_ledger (id, member_id, earned_amount, available_amount, used_amount, earn_type, expired_at, is_canceled, created_at, updated_at)
VALUES (X'00000000000000000000000000004009', X'00000000000000000000000000004007', 1000, 0, 1000, 'SYSTEM', DATEADD('DAY', 365, CURRENT_TIMESTAMP), false, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, ledger_id, created_at)
VALUES (X'00000000000000000000000000004015', X'00000000000000000000000000004007', 'EARN', 1000, X'00000000000000000000000000004009', CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, order_id, created_at)
VALUES (X'00000000000000000000000000004016', X'00000000000000000000000000004007', 'USE', 1000, 'ORDER-CU-T07', CURRENT_TIMESTAMP);

INSERT INTO point_usage_detail (id, transaction_id, ledger_id, used_amount, canceled_amount, created_at, updated_at)
VALUES (X'00000000000000000000000000004009', X'00000000000000000000000000004016', X'00000000000000000000000000004009', 1000, 0, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

-- CU-T08: 이미 전액 취소된 건 재취소
INSERT INTO member_point (member_id, total_balance, created_at, updated_at)
VALUES (X'00000000000000000000000000004008', 1000, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_ledger (id, member_id, earned_amount, available_amount, used_amount, earn_type, expired_at, is_canceled, created_at, updated_at)
VALUES (X'00000000000000000000000000004010', X'00000000000000000000000000004008', 1000, 1000, 0, 'SYSTEM', DATEADD('DAY', 365, CURRENT_TIMESTAMP), false, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, ledger_id, created_at)
VALUES (X'00000000000000000000000000004017', X'00000000000000000000000000004008', 'EARN', 1000, X'00000000000000000000000000004010', CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, order_id, created_at)
VALUES (X'00000000000000000000000000004018', X'00000000000000000000000000004008', 'USE', 1000, 'ORDER-CU-T08', CURRENT_TIMESTAMP);

INSERT INTO point_usage_detail (id, transaction_id, ledger_id, used_amount, canceled_amount, created_at, updated_at)
VALUES (X'00000000000000000000000000004010', X'00000000000000000000000000004018', X'00000000000000000000000000004010', 1000, 1000, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

INSERT INTO point_transaction (id, member_id, type, amount, order_id, related_transaction_id, created_at)
VALUES (X'00000000000000000000000000004019', X'00000000000000000000000000004008', 'USE_CANCEL', 1000, 'ORDER-CU-T08', X'00000000000000000000000000004018', CURRENT_TIMESTAMP);
